{% load static %}
<header>
  <nav class="navbar">
    <!-- Brand Logo -->
    <a href="{% if IS_DEVEDU %}../{% else %}{% url 'landing' %}{% endif %}" class="nav-brand">
      <h1>Language Learning Platform</h1>
    </a>

    <!-- Mobile Menu Toggle -->
    <button class="nav-toggle" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Center Navigation Links -->
    <div class="nav-center">
      <a href="{% if user.is_authenticated %}{% if IS_DEVEDU %}../dashboard/{% else %}{% url 'dashboard' %}{% endif %}{% else %}{% if IS_DEVEDU %}../{% else %}{% url 'landing' %}{% endif %}{% endif %}"
         class="nav-link {% if request.path == '/dashboard/' or request.path == '/' %}active{% endif %}">
        Home
      </a>
      {% if '/admin/' not in request.path %}
        <a href="{% if IS_DEVEDU %}../lessons/{% else %}{% url 'lessons_list' %}{% endif %}"
           class="nav-link {% if '/lessons/' in request.path %}active{% endif %}">
          Lessons
        </a>
        {% if user.is_authenticated %}
          <a href="{% if IS_DEVEDU %}../quests/daily/{% else %}{% url 'daily_quest' %}{% endif %}"
             class="nav-link {% if '/quests/' in request.path %}active{% endif %}">
            Daily Challenge
          </a>
        {% endif %}
        <a href="{% if IS_DEVEDU %}../progress/{% else %}{% url 'progress' %}{% endif %}"
           class="nav-link {% if request.path == '/progress/' %}active{% endif %}">
          Progress
        </a>
        <a href="{% if IS_DEVEDU %}../help/{% else %}{% url 'help' %}{% endif %}"
           class="nav-link {% if request.path == '/help/' %}active{% endif %}"
           title="Help & Documentation">
          Help
        </a>
      {% endif %}
      {% if user.is_authenticated and user.is_staff %}
        <a href="{% if IS_DEVEDU %}../admin/{% else %}/admin/{% endif %}"
           class="nav-link admin-link">
          Admin
        </a>
      {% endif %}
      {% if user.is_authenticated and user.profile and '/admin/' not in request.path %}
        <div class="xp-badge">
          <span class="xp-level">Lv {{ user.profile.current_level }}</span>
          <span class="xp-divider">|</span>
          <span class="xp-amount">{{ user.profile.total_xp }} XP</span>
        </div>
      {% endif %}
    </div>

    <!-- Right Side - User Section -->
    <div class="nav-right">
      {% if user.is_authenticated %}
        <a href="{% if IS_DEVEDU %}../account/{% else %}{% url 'account' %}{% endif %}"
           class="btn btn-ghost btn-sm"
           title="Account Settings">
          {% if user.profile %}
            <img src="{{ user.profile.get_avatar_thumbnail_url }}"
                 alt="{{ user.username }}"
                 class="avatar avatar-sm"
                 style="margin-right: 0.25rem;">
          {% else %}
            <img src="https://www.gravatar.com/avatar/?s=40&d=identicon"
                 alt="{{ user.username }}"
                 class="avatar avatar-sm"
                 style="margin-right: 0.25rem;">
          {% endif %}
          <span class="hide-mobile">Account</span>
        </a>
        <form method="post" action="{% if IS_DEVEDU %}../logout/{% else %}{% url 'logout' %}{% endif %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-primary btn-sm">
            Logout
          </button>
        </form>
      {% else %}
        <a href="{% if IS_DEVEDU %}../login/{% else %}{% url 'login' %}{% endif %}" 
           class="btn btn-ghost btn-sm">
          Login
        </a>
        <a href="{% if IS_DEVEDU %}../login/{% else %}{% url 'login' %}{% endif %}" 
           class="btn btn-primary btn-sm">
          Get Started
        </a>
      {% endif %}
    </div>
  </nav>
</header>