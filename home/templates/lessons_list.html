{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons - Language Learning Platform</title>
    {% if IS_DEVEDU %}<base href="/proxy/8000{{ request.path }}{% if not request.path|slice:'-1:' == '/' %}/{% endif %}">{% endif %}
    <link rel="stylesheet" href="{% static 'home/css/base.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/components.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/pages.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/animations.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/utilities.css' %}">
</head>
<body>
    {% include '_nav.html' %}
    
    <main class="container" style="padding-top: var(--space-3xl);">
        {% if not user.is_authenticated %}
        <!-- Guest View - Login Required -->
        <div class="text-center fade-in" style="padding: var(--space-4xl) 0;">
            <div class="empty-state">
                <div class="empty-state-icon">ðŸ”’</div>
                <h2 class="text-5xl font-black mb-lg">Premium Lessons Await</h2>
                <p class="lead mb-xl">Our interactive language lessons are exclusively available to registered members.<br>Complete your placement test to unlock personalized learning content!</p>
                <div class="flex gap-lg justify-center flex-wrap">
                    <a href="{% url 'login' %}" class="btn btn-primary btn-lg">
                        Login to Access Lessons
                    </a>
                    <a href="{% url 'onboarding_welcome' %}" class="btn btn-accent btn-lg">
                        Take Placement Test
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <!-- Logged In User View -->
        <!-- Header -->
        <div class="lessons-header fade-in">
            <h2>Explore Lessons</h2>
            <p>Dive into interactive language lessons designed to help you succeed</p>
        </div>
        
        <!-- Lessons Grid -->
        <div class="lessons-grid">
            {% for lesson in lessons %}
            <div class="lesson-card fade-in-up delay-{{ forloop.counter }}00">
                <div class="lesson-card-header">
                    <div class="lesson-icon">ðŸ“š</div>
                </div>
                <div class="lesson-card-body">
                    <h3 class="lesson-card-title">{{ lesson.title }}</h3>
                    <p class="lesson-card-description">{{ lesson.description }}</p>
                    
                    <div class="lesson-card-meta">
                        <span class="badge badge-primary">
                            {{ lesson.get_difficulty_level_display }}
                        </span>
                        <span class="badge badge-accent">
                            {{ lesson.language }}
                        </span>
                    </div>
                </div>
                <div class="lesson-card-footer">
                    <a href="{% if IS_DEVEDU %}../lessons/{{ lesson.id }}/{% else %}{% url 'lesson_detail' lesson.id %}{% endif %}" 
                       class="btn btn-primary btn-full">
                        Start Lesson â†’
                    </a>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <div class="empty-state-icon">ðŸ“š</div>
                <h3>No Lessons Available Yet</h3>
                <p>Check back soon for new learning content!</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </main>

    <footer>
      <p>&copy; 2025 Language Learning Platform. Empowering language learners worldwide.</p>
    </footer>

    <script>
      // Mobile menu toggle
      const navToggle = document.querySelector('.nav-toggle');
      const navCenter = document.querySelector('.nav-center');
      
      if (navToggle && navCenter) {
        navToggle.addEventListener('click', () => {
          navCenter.classList.toggle('active');
          navToggle.classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
          if (!navToggle.contains(e.target) && !navCenter.contains(e.target)) {
            navCenter.classList.remove('active');
            navToggle.classList.remove('active');
          }
        });
      }
    </script>
</body>
</html>