{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ language_metadata.native_name }} Level Assessment - Language Learning Platform</title>
    {% if IS_DEVEDU %}<base href="/proxy/8000{{ request.path }}{% if not request.path|slice:'-1:' == '/' %}/{% endif %}">{% endif %}
    <link rel="stylesheet" href="{% static 'home/css/base.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/components.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/pages.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/animations.css' %}">
    <link rel="stylesheet" href="{% static 'home/css/utilities.css' %}">
    <style>
      .language-selector-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--space-sm);
      }
      .language-pill {
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        padding: var(--space-sm) var(--space-lg);
        border-radius: var(--radius-full);
        border: 1px solid var(--gray-200);
        background: white;
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 600;
        transition: all 0.2s ease;
      }
      .language-pill:hover {
        border-color: var(--primary);
        box-shadow: 0 6px 18px rgba(79, 70, 229, 0.15);
      }
      .language-pill.active {
        background: var(--gradient-primary);
        color: white;
        border-color: transparent;
      }
      .language-pill .language-flag {
        font-size: 1.25rem;
      }
      .language-pill .language-status {
        font-size: var(--text-xs);
        font-weight: 500;
        padding: 0.15rem 0.5rem;
        border-radius: var(--radius-full);
        background: rgba(255, 255, 255, 0.2);
      }
      .language-pill.active .language-status {
        background: rgba(0, 0, 0, 0.15);
      }
    </style>
  </head>
  <body>
    {% include '_nav.html' %}

    <main class="container" style="padding-top: var(--space-2xl);">
      <!-- Django Messages -->
      {% if messages %}
        <div class="mt-xl">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Language Selector -->
      {% if supported_languages %}
      <section class="card mb-2xl">
        <div class="card-body">
          <p class="text-sm text-secondary mb-sm" style="text-transform: uppercase; letter-spacing: 0.1em;">
            Choose a language to assess
          </p>
          <div class="language-selector-grid">
            {% for lang in supported_languages %}
              <a href="{% url 'onboarding_welcome' %}?language={{ lang.name }}" class="language-pill {% if lang.name == selected_language %}active{% endif %}">
                <span class="language-flag">{{ lang.flag }}</span>
                <span>{{ lang.native_name }}</span>
                {% if lang.profile and lang.profile.has_completed_onboarding %}
                  <span class="language-status">Level {{ lang.profile.proficiency_level }}</span>
                {% else %}
                  <span class="language-status">Start</span>
                {% endif %}
              </a>
            {% endfor %}
          </div>
        </div>
      </section>
      {% endif %}

      <!-- Hero Section -->
      <section class="card mb-2xl fade-in">
        <div class="card-body text-center" style="padding: var(--space-3xl);">
          <h2 class="text-5xl font-black mb-lg">Discover Your {{ language_metadata.native_name }} Level</h2>
          {% if selected_language_profile and selected_language_profile.has_completed_onboarding %}
            <div class="card mt-xl" style="background: rgba(20, 184, 166, 0.1); border-left: 4px solid var(--primary);">
              <div class="card-body">
                <p class="text-lg mb-sm">
                  <strong>Assessment Complete!</strong>
                  Your {{ selected_language }} proficiency level is
                  <span class="badge badge-primary" style="font-size: var(--text-xl); padding: var(--space-sm) var(--space-lg);">
                    {{ selected_language_profile.get_proficiency_level_display }}
                  </span>
                </p>
                <p class="text-secondary">
                  View your results anytime from your progress page.
                </p>
              </div>
            </div>
            <a href="{% url 'dashboard' %}" class="btn btn-primary btn-lg mt-xl">
              Go to Dashboard
            </a>
          {% else %}
            <p class="lead mb-xl">Take our quick 10-question assessment to determine your {{ selected_language }} proficiency level. This helps us personalize your learning experience with lessons matched to your current skills.</p>
            <a href="{% url 'onboarding_quiz' %}?language={{ selected_language }}" class="btn btn-accent btn-lg">
              üöÄ Start {{ selected_language }} Assessment
            </a>
          {% endif %}
        </div>
      </section>

      <!-- Features Section -->
      <section class="features-grid mb-3xl">
        <div class="feature-item">
          <div class="feature-icon">‚ö°</div>
          <h3>Quick Assessment</h3>
          <p>10 questions covering beginner to intermediate levels. Takes about 5-7 minutes to complete.</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üéØ</div>
          <h3>Accurate Placement</h3>
          <p>Determines your CEFR level (A1, A2, or B1) based on progressive difficulty and proven language assessment methods.</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">‚ú®</div>
          <h3>Personalized Learning</h3>
          <p>Your results enable AI-powered lessons tailored to your exact proficiency level and learning needs.</p>
        </div>
      </section>

      <!-- What to Expect Section -->
      <section class="card mb-2xl">
        <div class="card-header">
          <h2>What to Expect</h2>
        </div>
        <div class="card-body">
          <div style="text-align: left; line-height: 1.8; color: var(--text-secondary);">
            <p><strong>üìù Question Types:</strong> Multiple choice questions testing vocabulary, grammar, and comprehension</p>
            <p><strong>‚è±Ô∏è Time:</strong> No time limit - take as long as you need to think through each question</p>
            <p><strong>üìä Levels Assessed:</strong></p>
            <ul style="margin-left: 2rem;">
              <li><strong>A1 (Beginner):</strong> Basic everyday expressions and simple phrases</li>
              <li><strong>A2 (Elementary):</strong> Sentences and common expressions for everyday situations</li>
              <li><strong>B1 (Intermediate):</strong> Main points of clear standard input on familiar topics</li>
            </ul>
            <p><strong>‚ú® After Completion:</strong> Immediate results with your proficiency level and personalized recommendations</p>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Language Learning Platform. Empowering language learners worldwide.</p>
    </footer>

    <script>
      // Mobile menu toggle
      const navToggle = document.querySelector('.nav-toggle');
      const navCenter = document.querySelector('.nav-center');

      navToggle.addEventListener('click', () => {
        navCenter.classList.toggle('active');
        navToggle.classList.toggle('active');
      });

      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!navToggle.contains(e.target) && !navCenter.contains(e.target)) {
          navCenter.classList.remove('active');
          navToggle.classList.remove('active');
        }
      });
    </script>
  </body>
</html>

